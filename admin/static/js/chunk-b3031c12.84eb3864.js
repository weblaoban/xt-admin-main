(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3031c12"],{"20ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));const l=(t,e)=>{let a,l=e||300;return function(){let e=arguments;a&&clearTimeout(a);let i=!a;a=setTimeout(()=>{a=null},l),i&&t.apply(this,e)}}},"26f7":function(t,e,a){},4095:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.addForm.id?"编辑购买详情":"新增购买详情","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.addForm,"label-width":"80px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.dataFormSubmit()}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"产品名称"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("span",[t._v("存续中")])])],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{"label-width":"100px",label:"业绩比较基准",prop:"brief"}},[a("el-input",{attrs:{placeholder:"业绩比较基准"},model:{value:t.addForm.brief,callback:function(e){t.$set(t.addForm,"brief",e)},expression:"addForm.brief"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"成立时间",prop:"otime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd 00:00:00",placeholder:"选择日期"},model:{value:t.addForm.otime,callback:function(e){t.$set(t.addForm,"otime",e)},expression:"addForm.otime"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"到期时间",prop:"dtime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd 00:00:00",type:"date",placeholder:"选择日期"},model:{value:t.addForm.dtime,callback:function(e){t.$set(t.addForm,"dtime",e)},expression:"addForm.dtime"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{"label-width":"100px",label:"回款计划",prop:"bplan"}},[a("el-input",{attrs:{placeholder:"回款计划"},model:{value:t.addForm.bplan,callback:function(e){t.$set(t.addForm,"bplan",e)},expression:"addForm.bplan"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"期数",prop:"scount"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.initContent},model:{value:t.addForm.scount,callback:function(e){t.$set(t.addForm,"scount",e)},expression:"addForm.scount"}},t._l(30,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)],1),a("div",{staticClass:"dynamic",staticStyle:{"line-height":"42px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[t._v("期数")]),a("el-col",{attrs:{span:6}},[t._v("回款计划表述")]),a("el-col",{attrs:{span:6}},[t._v("是否完成")])],1)],1),a("div",{staticClass:"dynamicCon",staticStyle:{"max-height":"300px","overflow-y":"scroll","overflow-x":"hidden"}},t._l(t.addForm.qlist,(function(e,l){return a("div",{key:l,staticClass:"dynamic"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("span",{staticStyle:{"line-height":"36px"}},[t._v(t._s(l+1))])]),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"",prop:"","label-width":"0"}},[a("el-input",{attrs:{placeholder:"回款计划表述"},model:{value:t.addForm.qlist[l].desc,callback:function(e){t.$set(t.addForm.qlist[l],"desc",e)},expression:"addForm.qlist[index].desc"}})],1)],1),a("el-col",{attrs:{span:6}},[e.finish?a("span",{staticStyle:{"line-height":"36px"}},[t._v("已完成")]):t._e(),e.finish?t._e():a("span",[t._v("未完成 "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.changeFinish(e)}}},[t._v("已完成提交")])],1)])],1)],1)})),0)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("确认")]),a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("关闭")])],1)],1)},i=[],s=a("20ca"),o={data(){return{visible:!1,addForm:{name:"",scount:1,brief:"",state:0,otime:"",dtime:"",zmount:"",bplan:"",qlist:[{finish:!1,desc:""}]},page:{total:0,currentPage:1,pageSize:10},buyDetail:[]}},methods:{init(t){this.addForm.id=t||null,this.visible=!0,this.$nextTick(()=>{this.$refs.dataForm.resetFields()}),this.addForm.id&&this.$http({url:this.$http.adornUrl("/admin/prodTagReference/info/"+this.addForm.id),method:"get",params:this.$http.adornParams()}).then(({data:t})=>{t.qlist=t.qlist?JSON.parse(t.qlist):[],this.addForm=t,console.log(t)})},getProductList(){this.$http({url:this.$http.adornUrl("/admin/prod/list"),method:"get",params:this.$http.adornParams()}).then(({data:t})=>{this.addForm=t})},addDetail(){this.addForm.detail.push({time:"2021-01-01",name:"产品名称",amount:5e3})},removeDetail(t){const{addForm:{detail:e}}=this;let a=[...e];a.splice(t,1),this.addForm.detail=a},changeFinish(t){t.finish=!0},initContent(t){console.log(t);const e=[];for(let a=0;a<t;a++)e.push({finish:!1,desc:""});this.addForm.qlist=e},dataFormSubmit:Object(s["a"])((function(){this.$refs["dataForm"].validate(t=>{if(t){const t={...this.addForm};console.log([...t.qlist]),t.qlist=JSON.stringify([...t.qlist]),delete t.id,this.$http({url:this.$http.adornUrl("/admin/prodTagReference"),method:this.addForm.id?"put":"post",data:this.$http.adornData({id:this.addForm.id||"",...t})}).then(({data:t})=>{this.$message({message:"操作成功",type:"success",duration:1500,onClose:()=>{this.visible=!1,this.$emit("refreshDataList",this.page)}})})}})}))}},r=o,d=(a("b2dd"),a("0c7c")),n=Object(d["a"])(r,l,i,!1,null,null,null);e["default"]=n.exports},b2dd:function(t,e,a){"use strict";a("26f7")}}]);