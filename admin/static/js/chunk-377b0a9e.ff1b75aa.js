(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-377b0a9e"],{"38db":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-prod"},[a("h4",[t._v("信托产品")]),a("avue-crud",{ref:"crud",attrs:{data:t.dataList,"table-loading":t.dataListLoading,option:t.tableOption},on:{"on-load":t.getDataList},scopedSlots:t._u([{key:"imgUrl",fn:function(e){return[e.row.name?a("p",[t._v(t._s(e.row.name))]):t._e(),e.row.name?t._e():a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.onShowSelectProd(97,e.index)}}},[t._v("请选择产品")])]}},{key:"menu",fn:function(e){return[e.index>0&&e.row.id?a("el-button",{attrs:{type:"primary",icon:"el-icon-top"},on:{click:function(a){return t.goUp(e.row,e.index,t.dataList)}}}):t._e(),e.index<t.dataList.length-1&&e.row.id?a("el-button",{attrs:{type:"primary",icon:"el-icon-bottom"},on:{click:function(a){return t.goDown(e.row,e.index,t.dataList)}}}):t._e(),t.isAuth("admin:indexImg:delete")?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.deleteHandle(e.row)}}},[t._v("清空")]):t._e()]}}])}),a("h4",[t._v("集合资管")]),a("avue-crud",{ref:"crud",attrs:{data:t.dataList2,"table-loading":t.dataListLoading,option:t.tableOption},on:{"on-load":t.getDataList1},scopedSlots:t._u([{key:"imgUrl",fn:function(e){return[e.row.name?a("p",[t._v(t._s(e.row.name))]):t._e(),e.row.name?t._e():a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.onShowSelectProd(98,e.index)}}},[t._v("请选择产品")])]}},{key:"menu",fn:function(e){return[e.index>0&&e.row.id?a("el-button",{attrs:{type:"primary",icon:"el-icon-top"},on:{click:function(a){return t.goUp(e.row,e.index,t.dataList2)}}}):t._e(),e.index<t.dataList2.length-1&&e.row.id?a("el-button",{attrs:{type:"primary",icon:"el-icon-bottom"},on:{click:function(a){return t.goDown(e.row,e.index,t.dataList2)}}}):t._e(),t.isAuth("admin:indexImg:delete")?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.deleteHandle(e.row)}}},[t._v("清空")]):t._e()]}}])}),a("h4",[t._v("私募基金")]),a("avue-crud",{ref:"crud",attrs:{data:t.dataList3,"table-loading":t.dataListLoading,option:t.tableOption},on:{"on-load":t.getDataList2},scopedSlots:t._u([{key:"imgUrl",fn:function(e){return[e.row.name?a("p",[t._v(t._s(e.row.name))]):t._e(),e.row.name?t._e():a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.onShowSelectProd(99,e.index)}}},[t._v("请选择产品")])]}},{key:"menu",fn:function(e){return[e.index>0&&e.row.id?a("el-button",{attrs:{type:"primary",icon:"el-icon-top"},on:{click:function(a){return t.goUp(e.row,e.index,t.dataList3)}}}):t._e(),e.index<t.dataList3.length-1&&e.row.id?a("el-button",{attrs:{type:"primary",icon:"el-icon-bottom"},on:{click:function(a){return t.goDown(e.row,e.index,t.dataList3)}}}):t._e(),t.isAuth("admin:indexImg:delete")?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.deleteHandle(e.row)}}},[t._v("清空")]):t._e()]}}])}),a("el-dialog",{attrs:{title:"提示",visible:t.showSelectProd,width:"30%"},on:{"update:visible":function(e){t.showSelectProd=e}}},[a("div",{staticClass:"content"},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.selectItem,callback:function(e){t.selectItem=e},expression:"selectItem"}},t._l(t.selectList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showSelectProd=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSetProd}},[t._v("确 定")])],1)])],1)},n=[],o=a("72eb");const s=[{imgUrl:"",default:!0},{imgUrl:"",default:!0},{imgUrl:"",default:!0},{imgUrl:"",default:!0}];var r={data(){return{selectItem:"",dataForm:{indexImg:""},dataList:[...s],dataList3:[...s],dataList2:[...s],dataListLoading:!1,addOrUpdateVisible:!1,resourcesUrl:"http://8.140.252.39/",tableOption:o["a"],page:{total:0,currentPage:1,pageSize:10},showSelectProd:!1,selectList:[],sold_num:"",loading:!1}},methods:{getDataList(t,e){this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/admin/prod/page"),method:"get",params:this.$http.adornParams(Object.assign({current:null==t?this.page.currentPage:t.currentPage,size:null==t?this.page.pageSize:t.pageSize,categoryId:97,soldNum:1,status:-1},e))}).then(({data:t})=>{const e=[...s];t.records=t.records.sort((t,e)=>t.soldNum>e.soldNum),e.forEach((a,i)=>{t.records[i]&&(e[i]=t.records[i])}),this.dataList=e,this.dataListLoading=!1})},getDataList1(t,e){this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/admin/prod/page"),method:"get",params:this.$http.adornParams(Object.assign({current:null==t?this.page.currentPage:t.currentPage,size:null==t?this.page.pageSize:t.pageSize,categoryId:98,soldNum:1,status:-1},e))}).then(({data:t})=>{const e=[...s];e.forEach((a,i)=>{t.records[i]&&(e[i]=t.records[i])}),this.dataList2=e,this.dataListLoading=!1})},getDataList2(t,e){this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/admin/prod/page"),method:"get",params:this.$http.adornParams(Object.assign({current:null==t?this.page.currentPage:t.currentPage,size:null==t?this.page.pageSize:t.pageSize,categoryId:99,soldNum:1,status:-1},e))}).then(({data:t})=>{const e=[...s];e.forEach((a,i)=>{t.records[i]&&(e[i]=t.records[i])}),this.dataList3=e,this.dataListLoading=!1})},getAllList(){this.getDataList(),this.getDataList1(),this.getDataList2()},onShowSelectProd(t,e){this.dataListLoading=!0,this.selectItem="",this.sold_num=e+1,this.$http({url:this.$http.adornUrl("/admin/prod/page"),method:"get",params:this.$http.adornParams(Object.assign({current:1,size:1e3,categoryId:t,soldNum:0,status:-1}))}).then(({data:t})=>{this.selectList=t.records,this.dataListLoading=!1,this.showSelectProd=!0})},onSetProd(){if(!this.selectItem)return;const t={id:this.selectItem,soldNum:this.sold_num};this.$http({url:this.$http.adornUrl("/admin/prod"),method:t.id?"put":"post",data:this.$http.adornData(t)}).then(()=>{this.$message({message:"操作成功",type:"success",duration:1500,onClose:()=>{this.getAllList(),this.showSelectProd=!1,this.selectItem=""}})})},deleteHandle(t){if(t.default)return;let e=Object.assign({},t);e.soldNum=0,this.$http({url:this.$http.adornUrl("/admin/prod"),method:e.id?"put":"post",data:this.$http.adornData(e)}).then(()=>{this.$message({message:"操作成功",type:"success",duration:2e3,onClose:()=>{this.getAllList()}})})},goDown(t,e,a){if(this.loading)return;this.loading=!0;const i=a[e+1];i&&!i.default&&(this.$http({url:this.$http.adornUrl("/admin/prod"),method:"put",data:this.$http.adornData({id:t.id,soldNum:e+2})}).then(()=>{this.loading=!1}),this.$http({url:this.$http.adornUrl("/admin/prod"),method:"put",data:this.$http.adornData({id:i.id,soldNum:e+1})}).then(()=>{this.loading=!1,this.$message({message:"操作成功",type:"success",duration:1500,onClose:()=>{this.getAllList()}})}))},goUp(t,e,a){if(this.loading)return;this.loading=!0;const i=a[e-1];i&&!i.default&&(this.$http({url:this.$http.adornUrl("/admin/prod"),method:"put",data:this.$http.adornData({id:t.id,soldNum:e})}).then(()=>{this.loading=!1}),this.$http({url:this.$http.adornUrl("/admin/prod"),method:"put",data:this.$http.adornData({id:i.id,soldNum:e+1})}).then(()=>{this.loading=!1,this.$message({message:"操作成功",type:"success",duration:1500,onClose:()=>{this.getAllList()}})}))}}},d=r,l=a("0c7c"),c=Object(l["a"])(d,i,n,!1,null,null,null);e["default"]=c.exports},"72eb":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));const i={searchMenuSpan:6,columnBtn:!1,border:!0,selection:!1,index:!1,indexLabel:"序号",stripe:!0,menuAlign:"center",menuWidth:350,align:"center",refreshBtn:!0,searchSize:"mini",addBtn:!1,editBtn:!1,delBtn:!1,viewBtn:!1,showHeader:!1,props:{label:"label",value:"value"},column:[{label:"轮播图片",prop:"imgUrl",type:"upload",slot:!0,listType:"picture-img"}]}}}]);