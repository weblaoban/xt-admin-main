(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0df298"],{8978:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-prod"},[a("avue-crud",{ref:"crud",attrs:{page:t.page,data:t.dataList,"table-loading":t.dataListLoading,permission:t.permission,option:t.tableOption},on:{"search-change":t.searchChange,"selection-change":t.selectionChange,"on-load":t.getDataList},scopedSlots:t._u([{key:"status",fn:function(e){return[1===e.row.status?a("el-tag",{attrs:{size:"small"}},[t._v("上架")]):a("el-tag",{attrs:{size:"small"}},[t._v("未上架")])]}},{key:"des",fn:function(e){return[e.row.des?a("img",{attrs:{src:e.row.des,alt:""}}):t._e()]}},{key:"menu",fn:function(e){return[t.isAuth("prod:prod:update")?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return t.addOrUpdateHandle(e.row.id)}}},[t._v("修改")]):t._e(),t.isAuth("prod:prod:delete")?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.deleteHandle(e.row.id)}}},[t._v("删除")]):t._e()]}}])},[a("template",{slot:"menuLeft"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(e){return e.stopPropagation(),t.addOrUpdateHandle()}}},[t._v("新增")])],1)],2),t.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:t.getDataList}}):t._e()],1)},s=[],n=a("359b"),r={data(){return{showAdd:!1,addOrUpdateVisible:!1,dataForm:{prodName:""},permission:{},dataList:[],page:{total:0,currentPage:1,pageSize:10},dataListSelections:[],dataListLoading:!1,tableOption:{searchMenuSpan:6,columnBtn:!1,border:!0,selection:!1,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",menuWidth:350,align:"center",refreshBtn:!1,searchSize:"mini",addBtn:!1,editBtn:!1,delBtn:!1,viewBtn:!1,props:{label:"label",value:"value"},column:[{label:"标题",prop:"title"},{label:"上传人",prop:"prodName"},{label:"标题",prop:"title"},{label:"列表图片",prop:"des"},{label:"创建时间",prop:"uploadTime"},{label:"修改时间",prop:"uploadTime"}]},resourcesUrl:"http://8.140.252.39/"}},components:{AddOrUpdate:n["default"]},methods:{getDataList(t,e,a){this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/admin/content/page"),method:"get",params:this.$http.adornParams(Object.assign({current:null==t?this.page.currentPage:t.currentPage,size:null==t?this.page.pageSize:t.pageSize,categoryId:9},e))}).then(({data:t})=>{this.dataList=t.records;for(const e in this.dataList)if(this.dataList.hasOwnProperty(e)){this.dataList[e]}this.page.total=t.total,this.dataListLoading=!1,a&&a()})},addOrUpdateHandle(t){this.addOrUpdateVisible=!0,this.$nextTick(()=>{this.$refs.addOrUpdate.init(t)})},deleteHandle(t){let e=this.getSeleProdIds();t&&e.push(t),this.$confirm(`确定进行[${t?"删除":"批量删除"}]操作?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$http({url:this.$http.adornUrl("/prod/prod"),method:"delete",data:this.$http.adornData(e,!1)}).then(({data:t})=>{this.$message({message:"操作成功",type:"success",duration:1500,onClose:()=>{this.getDataList(this.page)}})})}).catch(()=>{})},searchChange(t,e){this.getDataList(this.page,t,e)},selectionChange(t){this.dataListSelections=t},getSeleProdIds(){return this.dataListSelections.map(t=>t.prodId)}}},d=r,o=a("2877"),l=Object(o["a"])(d,i,s,!1,null,null,null);e["default"]=l.exports}}]);